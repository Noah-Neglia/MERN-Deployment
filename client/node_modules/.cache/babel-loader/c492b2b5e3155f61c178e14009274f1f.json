{"ast":null,"code":"import _defineProperty from\"/Users/noahneglia/Desktop/chatapp/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/Users/noahneglia/Desktop/chatapp/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/noahneglia/Desktop/chatapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import io from'socket.io-client';import indexCss from\"../CSS/index.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){// notice that we pass a callback function to initialize the socket\n// we don't need to destructure the 'setSocket' function since we won't be updating the socket state\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),results=_useState2[0],setResults=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),send=_useState4[0],setSend=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),yourMessages=_useState6[0],setYourMessages=_useState6[1];var yourMsgsRev=yourMessages.slice().reverse();var resultsRev=results.slice().reverse();var _useState7=useState(function(){return io(':8000');}),_useState8=_slicedToArray(_useState7,1),socket=_useState8[0];var AlwaysScrollToBottom=function AlwaysScrollToBottom(){var elementRef=useRef();useEffect(function(){return elementRef.current.scrollIntoView();});return/*#__PURE__*/_jsx(\"div\",{ref:elementRef});};useEffect(function(){// we need to set up all of our event listeners\n// in the useEffect callback function\nconsole.log('Is this running?');socket.on(\"send_data_to_all_other_clients\",function(data){setResults(function(prevResults){return[data].concat(_toConsumableArray(prevResults));});});socket.on(\"console\",function(data){console.log(data);});},[]);var submitHandler=function submitHandler(e){e.preventDefault();socket.emit(\"event_from_client\",Object.values(send));setYourMessages(function(prevResults){return[Object.values(send)[0]].concat(_toConsumableArray(prevResults));});console.log(yourMessages);};var onChangeHandler=function onChangeHandler(e){setSend(_defineProperty({send:send},e.target.name,e.target.value));};return/*#__PURE__*/_jsxs(\"div\",{className:indexCss.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:indexCss.messageContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:indexCss.yours,children:yourMsgsRev.map(function(vals,idx){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:indexCss.yourTexts,children:vals}),/*#__PURE__*/_jsx(AlwaysScrollToBottom,{})]},idx);})}),/*#__PURE__*/_jsx(\"div\",{className:indexCss.theirs,children:resultsRev.map(function(val,idx){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:indexCss.theirTexts,children:val}),/*#__PURE__*/_jsx(AlwaysScrollToBottom,{})]},idx);})})]}),/*#__PURE__*/_jsxs(\"form\",{id:indexCss.flex,onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"send\",onChange:onChangeHandler}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"send\"})]})]});};export default Index;","map":{"version":3,"names":["React","useState","useEffect","useRef","io","indexCss","Index","results","setResults","send","setSend","yourMessages","setYourMessages","yourMsgsRev","slice","reverse","resultsRev","socket","AlwaysScrollToBottom","elementRef","current","scrollIntoView","console","log","on","data","prevResults","submitHandler","e","preventDefault","emit","Object","values","onChangeHandler","target","name","value","container","messageContainer","yours","map","vals","idx","yourTexts","theirs","val","theirTexts","flex"],"sources":["/Users/noahneglia/Desktop/chatapp/client/src/components/Index.jsx"],"sourcesContent":["\nimport React, { useState, useEffect, useRef } from 'react';\nimport io from 'socket.io-client';\n\nimport indexCss from \"../CSS/index.module.css\"\n\n \nconst Index = () =>{\n  // notice that we pass a callback function to initialize the socket\n  // we don't need to destructure the 'setSocket' function since we won't be updating the socket state\n  const [results, setResults] = useState([])\n  const [send, setSend] = useState(\"\")\n  const [yourMessages, setYourMessages] = useState([])\n\n  const yourMsgsRev = yourMessages.slice().reverse();\n  const resultsRev = results.slice().reverse()\n\n  \n\n\n  const [socket] = useState(() => io(':8000'));\n \n\n\n  const AlwaysScrollToBottom = () => {\n    const elementRef = useRef();\n    useEffect(() => elementRef.current.scrollIntoView());\n    return <div ref={elementRef} />;\n  };\n  \n\n \n  useEffect(() => {\n    // we need to set up all of our event listeners\n    // in the useEffect callback function\n    console.log('Is this running?');\n     socket.on(\"send_data_to_all_other_clients\", data =>{\n        setResults(prevResults =>{\n            \n            return [data, ...prevResults]\n\n        })\n    });\n    socket.on(\"console\", data =>{\n      console.log(data)\n  });\n  }, []);\n\n\n  const submitHandler = (e) => {\n    e.preventDefault()\n    socket.emit(\"event_from_client\", Object.values(send))\n    \n\n    setYourMessages(prevResults =>{\n        \n\n        return [Object.values(send)[0], ...prevResults]\n\n    })\n\n    console.log(yourMessages)\n\n   \n    \n}\n\nconst onChangeHandler = (e) => {\n    setSend({\n       send,\n       [e.target.name]: e.target.value\n    })\n    \n\n}\n  \n \n  return (\n    <div className={indexCss.container}>\n      <div className={indexCss.messageContainer}>\n\n\n      \n      \n        <div className={indexCss.yours}>\n          {\n                        yourMsgsRev.map((vals, idx) => {\n                            return(\n                        <div key={idx}>\n                            <h3 className={indexCss.yourTexts}>{vals}</h3>\n                            <AlwaysScrollToBottom/>\n                        </div>\n                        \n                        \n                        \n                    \n                            )\n                        })\n                      }\n                      \n                      </div>\n                        \n                      <div className={indexCss.theirs}>\n                          {\n                        resultsRev.map((val, idx) => {\n                            return(\n                      \n                        <div key={idx}>\n                            <h3 className={indexCss.theirTexts}>{val}</h3>\n                            <AlwaysScrollToBottom/>\n                        </div>\n                        \n \n                            )\n                        })\n                        }\n                      </div>\n                  \n                  \n        \n\n      </div>\n      \n      \n      <form id={indexCss.flex} onSubmit={submitHandler}>\n          <input type=\"text\" name='send' onChange={onChangeHandler} />\n          <button type='submit'>send</button>\n      </form>\n    </div>\n  );\n}\n \nexport default Index;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}